<!--
  Generated template for the ProfilePage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <ion-buttons>
      <button ion-button icon-only (click)="dismiss()">
          <ion-icon color="white" name="arrow-back"></ion-icon>
        </button>
  </ion-buttons>
  </ion-navbar>
</ion-header>
  <ion-content>
      <ion-row padding>
          <!-- Avatar -->
          <ion-col col-3>
            <img [src]="chosenPicture" class="avatar" alt="" onerror="this.src='./assets/imgs/default-avatar.jpg'">
          </ion-col>
          <!-- Information about user -->
          <ion-col col-6 text-center >
            <h6>{{posts.length}}</h6>
            <p no-padding no-margin>Posts</p>
          </ion-col>
          <ion-col col-3 text-center>
            <h6>{{connectionCount}}</h6>
            <p no-paddin no-margin>Connections</p>
          </ion-col>
        </ion-row>

        <ion-row no-padding no-margin>
            <ion-col no-padding no-margin col-4>
            </ion-col>
              <ion-col no-padding no-margin text-center col-8>
              <button (click)="addAsConnection()" ion-button outline small>
                  <div *ngIf="connected; else showNotConnected">
                      Remove Connection
                    </div>
                    <ng-template #showNotConnected><div>Add Connection</div></ng-template>
              </button>
              <button ion-button outline small (click)="sendMessage()" *ngIf="connected;">
                  <ion-icon name="ios-chatbubbles"></ion-icon>
                </button>
            </ion-col>
          </ion-row>
        <ion-card>
          <ion-card-header style="align-items: center; text-align: center">
              {{user.fullName}}
          </ion-card-header>
          <ion-card-content>
            <div class="card-body">
                {{user.myStory}}
            </div>
            <div class="break"></div>
            <div class="post-header">
              Posts
            </div>
            <div class="post-body">
              <div *ngIf="posts.length === 0; else showNotEmpty">
                <p style="opacity: 0.5; text-align: center; padding-top: 15px; padding-bottom: 5px;">They have not posted anything yet</p>
              </div>
              <ng-template #showNotEmpty>
                <div>
                    <ion-item *ngFor="let post of posts">
                        <ion-card>
                          <ion-item>
                            <ion-avatar item-start>
                              <img src="{{post.avatar_image}}" onerror="this.src='./assets/imgs/default-avatar.jpg'"/>
                            </ion-avatar>
                            <h2>{{post.user_name}}</h2>
                            <p>{{post.posted}}</p>
                          </ion-item>
                          <ion-card-content text-wrap>
                            {{post.text}}
                          </ion-card-content>
                          <ion-row>
                              <ion-col>
                                <button ion-button icon-start clear small (click)="likePost(post)">
                                  <ion-icon name="ios-thumbs-up"></ion-icon>
                                  <div>{{post.likes}} Likes</div>
                                </button>
                              </ion-col>
                              <ion-col>
                                <button ion-button icon-start clear small (click)="seeComments(post)">
                                  <ion-icon name="ios-text"></ion-icon>
                                  <div >{{post.comment_amount}} Comments</div>
                                </button>
                              </ion-col>
                            </ion-row>
                        </ion-card>
                      </ion-item>
                </div>
              </ng-template>
            </div>
          </ion-card-content>
        </ion-card>
  </ion-content>
  
